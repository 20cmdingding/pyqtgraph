#!/usr/bin/make -f
#export DH_VERBOSE=1
export PYBUILD_NAME=pyqtgraph
export PYBUILD_TEST_PYTEST=1

%:
	dh $@ --with python2,python3,sphinxdoc --buildsystem=pybuild

override_dh_installdocs:
	dh_installdocs -ppython-pyqtgraph
	dh_installdocs -ppython3-pyqtgraph
	PYTHONPATH=`pwd` make -C doc html
	dh_installdocs -ppython-pyqtgraph-doc doc/build/html
	rm -rf doc/build
#	dh_installdocs -A

#override_dh_clean:
#	dh_clean
#	find ./ -name "*.pyc" -delete

override_dh_auto_install:
	echo `pwd`
	mkdir -p debian/python-pyqtgraph/usr/lib/python2.7/dist-packages
	mkdir -p debian/python3-pyqtgraph/usr/lib/python3.4/dist-packages
	dh_auto_install

#override_dh_auto_build:
#	dh_auto_build
#	PYTHONPATH=. http_proxy='127.0.0.1:9' sphinx-build -N -bhtml doc/source doc/build/html # HTML generator
	#PYTHONPATH=. http_proxy='127.0.0.1:9' sphinx-build -N -bman docs/ build/man # Manpage generator